const doc=document,getId="getElementById",countryInput=doc[getId]("countryInput"),numberInput=doc[getId]("numberInput"),messageInput=doc[getId]("messageInput"),generatedLink=doc[getId]("generatedLink"),generateBtn=doc[getId]("generateBtn"),copyBtn=doc[getId]("copyBtn"),clearBtn=doc[getId]("clearBtn"),generatedLinkHidden=doc[getId]("generatedLinkHidden"),numberInputRegex=/^\d{5,15}$/;generateBtn.addEventListener("click",function(){return""===numberInput.value?(window.alert("Oops, The phone number is empty."),!1):numberInputRegex.test(numberInput.value)?void(generateBtn.innerHTML="Generating...",generateBtn.disabled=!0,setTimeout(()=>{let e="https://wa.me/"+countryInput.value+numberInput.value;messageInput.value&&(e+="?text="+encodeURIComponent(messageInput.value)),generatedLink.value=e,generateBtn.innerHTML="Generate",generateBtn.disabled=!1,generatedLinkHidden.classList.remove("hidden")},1e3)):(window.alert("Enter a valid phone number (5–15 digits)."),!1)}),copyBtn.addEventListener("click",function(){return""===numberInput.value?(window.alert("Oops, The phone number is empty."),!1):numberInputRegex.test(numberInput.value)?void(copyBtn.innerHTML="Copying...",copyBtn.disabled=!0,setTimeout(()=>{copyBtn.innerHTML="Copy",copyBtn.disabled=!1},1e3),generatedLink.select(),document.execCommand("copy")):(window.alert("Enter a valid phone number (5–15 digits)."),!1)}),clearBtn.addEventListener("click",function(){if(""===numberInput.value)return window.alert("Oops, The phone number is empty."),!1;clearBtn.innerHTML="Clearing...",clearBtn.disabled=!0,setTimeout(()=>{numberInput.value="",messageInput.value="",generatedLink.value="",clearBtn.innerHTML="Clear",clearBtn.disabled=!1,generatedLinkHidden.classList.add("hidden")},1e3)}),document.addEventListener("DOMContentLoaded",function(){function e(e){for(let n=0;n<countryInput.options.length;n++)if(countryInput.options[n].dataset.code===e){countryInput.selectedIndex=n;break}}let n=localStorage.getItem("savedCountryCode");n?e(n):fetch("https://ipapi.co/json/").then(e=>e.json()).then(n=>{let t=n.country;localStorage.setItem("savedCountryCode",t),e(t)}).catch(()=>{console.warn("Could not fetch geolocation. Default country not set.")})});